# Telegram Media Downloader

<p align="center">
<a href="https://github.com/Dineshkarthik/telegram_media_downloader/actions"><img alt="Unittest" src="https://github.com/Dineshkarthik/telegram_media_downloader/workflows/Unittest/badge.svg"></a>
<a href="https://codecov.io/gh/Dineshkarthik/telegram_media_downloader"><img alt="Coverage Status" src="https://codecov.io/gh/Dineshkarthik/telegram_media_downloader/branch/master/graph/badge.svg"></a>
<a href="https://github.com/Dineshkarthik/telegram_media_downloader/blob/master/LICENSE"><img alt="License: MIT" src="https://black.readthedocs.io/en/stable/_static/license.svg"></a>
<a href="https://github.com/python/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg"></a>
</p>

## –û–ø–∏—Å–∞–Ω–∏–µ

Telegram Media Downloader ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —á–∞—Ç–æ–≤ –∏ –∫–∞–Ω–∞–ª–æ–≤ Telegram, —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ/–∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ–∞–π–ª—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ–¥–∏–∞ (–∞—É–¥–∏–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–∏–¥–µ–æ—Å–æ–æ–±—â–µ–Ω–∏—è)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (JSON –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Ç–æ–≤/–∫–∞–Ω–∞–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —á–∞—Ç–æ–≤ —Å –º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä–æ–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é, –¥–∞—Ç–µ, —Ä–∞–∑–º–µ—Ä—É —Ñ–∞–π–ª–∞
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ä—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏ (SOCKS4, SOCKS5, HTTP)
- ‚úÖ ‚ú® **–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π Web Dashboard** ( Fast API + React)
- ‚úÖ üìä **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ClickHouse** –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è  | –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è                                       |
| ---------- | ------------------------------------------------ |
| Python     | `Python 3.8` –∏ –≤—ã—à–µ                              |
| –¢–∏–ø—ã –º–µ–¥–∏–∞ | audio, document, photo, video, video_note, voice |

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –î–ª—è Linux/macOS (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `make`):

```sh
git clone https://github.com/Dineshkarthik/telegram_media_downloader.git
cd telegram_media_downloader
make install
```

### –î–ª—è Windows –∏–ª–∏ —Å–∏—Å—Ç–µ–º –±–µ–∑ `make`:

```sh
git clone https://github.com/Dineshkarthik/telegram_media_downloader.git
cd telegram_media_downloader
pip3 install -r requirements.txt
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

```sh
git clone https://github.com/Dineshkarthik/telegram_media_downloader.git
cd telegram_media_downloader
make dev_install
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `config.yaml`.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
   ```sh
   cp config.yaml.example config.yaml
   ```

2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏ Telegram:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://my.telegram.org/apps](https://my.telegram.org/apps)
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Telegram
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `api_id` –∏ `api_hash`

3. –ü–æ–ª—É—á–∏—Ç–µ ID —á–∞—Ç–∞:
   - **–ß–µ—Ä–µ–∑ –≤–µ–±-–≤–µ—Ä—Å–∏—é Telegram**: –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ URL
   - **–ß–µ—Ä–µ–∑ –±–æ—Ç–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@username_to_id_bot](https://t.me/username_to_id_bot)

4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.yaml` —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–º. —Ñ–∞–π–ª `config.yaml.example` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ —Å–æ –≤—Å–µ–º–∏ –æ–ø—Ü–∏—è–º–∏.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```yaml
api_id: your_api_id
api_hash: your_api_hash
language: ru  # ru –∏–ª–∏ en

# –¢–∏–ø—ã –º–µ–¥–∏–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
media_types:
  - all  # –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã: audio, document, photo, video, voice, video_note

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
download_settings:
  max_parallel_downloads: 5  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
  pagination_limit: 100       # –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
  base_directory: ""          # –ë–∞–∑–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–ø—É—Å—Ç–æ = –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–∫—Ä–∏–ø—Ç–∞)
  skip_duplicates: true       # –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
  download_message_history: false  # –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
  history_format: json        # –§–æ—Ä–º–∞—Ç –∏—Å—Ç–æ—Ä–∏–∏ (json –∏–ª–∏ txt)
  history_directory: history  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
```

#### –§–∏–ª—å—Ç—Ä—ã:

```yaml
# –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é
sender_filter:
  enabled: false
  user_ids: [123456789]
  usernames: ["@username"]

# –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ
start_date: "2024-01-01"  # –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞
end_date: "2024-12-31"    # –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞
max_messages: 1000        # –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```yaml
logging:
  file_logging:
    enabled: false
    file_path: downloads.log
    level: INFO
    max_bytes: 10485760  # 10 MB
    backup_count: 5
```

#### –ü—Ä–æ–∫—Å–∏:

–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SOCKS4, SOCKS5 –∏ HTTP –ø—Ä–æ–∫—Å–∏:

```yaml
proxy:
  scheme: socks5  # socks4, socks5, http
  hostname: 11.22.33.44
  port: 1234
  username: your_username  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
  password: your_password  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```yaml
# SOCKS5 –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
proxy:
  scheme: socks5
  hostname: 127.0.0.1
  port: 1080

# SOCKS5 —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
proxy:
  scheme: socks5
  hostname: proxy.example.com
  port: 1080
  username: myuser
  password: mypass

# HTTP –ø—Ä–æ–∫—Å–∏
proxy:
  scheme: http
  hostname: proxy.company.com
  port: 8080
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–∫—Å–∏ –¥–ª—è Telegram

#### –ù–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Ç–æ–≤:

```yaml
chats:
  - chat_id: 123456789
    title: "–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞"
    last_read_message_id: 0
    ids_to_retry: []
    enabled: true
  - chat_id: 987654321
    title: "–î—Ä—É–≥–æ–π —á–∞—Ç"
    last_read_message_id: 0
    ids_to_retry: []
    enabled: true
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```sh
python3 media_downloader.py
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Web Dashboard)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É —Å —Ñ–ª–∞–≥–æ–º `--web` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞:

```sh
python3 media_downloader.py --web
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8000` –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –í—ã —É–≤–∏–¥–∏—Ç–µ:
- –ñ–∏–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —á–∞—Ç–∞–º –∏–∑ ClickHouse
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∑–æ–∫
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–µ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:

| –¢–∏–ø –º–µ–¥–∏–∞  | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–∫–∏         |
| ---------- | --------------------------- |
| audio      | `base_directory/audio`      |
| document   | `base_directory/document`   |
| photo      | `base_directory/photo`      |
| video      | `base_directory/video`      |
| voice      | `base_directory/voice`      |
| video_note | `base_directory/video_note` |
| history    | `base_directory/history`    |

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —á–∞—Ç–æ–≤

–í—ã–±–æ—Ä —á–∞—Ç–æ–≤ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–≤—É—Ö UI:

- **classic** ‚Äî —Ç–µ–∫—É—â–∏–π ‚Äú–∫–æ–º–∞–Ω–¥–Ω—ã–π‚Äù —Ä–µ–∂–∏–º (–≤–≤–æ–¥ –Ω–æ–º–µ—Ä–æ–≤/–∫–æ–º–∞–Ω–¥)
- **tui** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–π TUI (‚Üë/‚Üì, Space=–≤—ã–±–æ—Ä, Enter=OK) + –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏–π —Å–ø—Ä–∞–≤–∞

–í–∫–ª—é—á–µ–Ω–∏–µ TUI:

```yaml
chat_selection_ui: tui
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–µ–≤—å—é –≤ TUI (–≤–∞—Ä–∏–∞–Ω—Ç D + –≤–∞—Ä–∏–∞–Ω—Ç B). –î–µ—Ñ–æ–ª—Ç `messages_count: 1` –Ω–µ –¥–µ–ª–∞–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ï—Å–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å `>1`, —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º –ø–æ–¥–∫–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Å –¥–µ–±–∞—É–Ω—Å–æ–º –∏ –∫—ç—à–µ–º):

```yaml
tui:
  preview:
    messages_count: 5
    debounce_ms: 200
    cache_ttl_s: 300
    wrap: true
    max_lines: 12
```

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

1. –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —á–∞—Ç—ã, –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –Ω–æ–≤—ã–µ
2. –í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º —Å–ø–∏—Å–∫–æ–º —á–∞—Ç–æ–≤:
   - **–í—Å–µ —á–∞—Ç—ã** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
   - **–¢–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã –∏ –∫–∞–Ω–∞–ª—ã** ‚Äî –∏—Å–∫–ª—é—á–∏—Ç—å –ª–∏—á–Ω—ã–µ —á–∞—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - **–¢–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª—ã** ‚Äî —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
   - **–¢–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã** ‚Äî —Ç–æ–ª—å–∫–æ –≥—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã
   - **–¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚Äî —Ç–æ–ª—å–∫–æ –ª–∏—á–Ω—ã–µ —á–∞—Ç—ã
   - **–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é** ‚Äî –Ω–∞–π—Ç–∏ —á–∞—Ç—ã –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
3. –û—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ —Å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏ (–ø–æ 50 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
4. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
   - –ù–æ–º–µ—Ä–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1,3,5`) ‚Äî –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∞—Ç—ã
   - `all` ‚Äî –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Ç—ã
   - `next` –∏–ª–∏ `n` ‚Äî —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   - `prev` –∏–ª–∏ `p` ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   - `page N` ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É N
   - `search` ‚Äî –Ω–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
   - `filter` ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
   - `done` ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—ã–±–æ—Ä
5. –í—ã–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º —Å–ø–∏—Å–∫–æ–º:**
```
–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —á–∞—Ç–æ–≤: 2 (—Ç–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã –∏ –∫–∞–Ω–∞–ª—ã)
–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ: 156 —á–∞—Ç–æ–≤ (–≥—Ä—É–ø–ø—ã + –∫–∞–Ω–∞–ª—ã)

–ü–æ–∫–∞–∑–∞–Ω–æ 1-50 –∏–∑ 156
[—Ç–∞–±–ª–∏—Ü–∞ —Å —á–∞—Ç–∞–º–∏]

–í–∞—à –≤—ã–±–æ—Ä: 1,5,10
‚úì –í—ã–±—Ä–∞–Ω: –ö–∞–Ω–∞–ª 1
‚úì –í—ã–±—Ä–∞–Ω: –ö–∞–Ω–∞–ª 2
‚úì –í—ã–±—Ä–∞–Ω: –ö–∞–Ω–∞–ª 3

–í–∞—à –≤—ã–±–æ—Ä: next
[—Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞]

–í–∞—à –≤—ã–±–æ—Ä: search
–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å: –ø—Ä–æ–≥—Ä–∞–º–º
–ù–∞–π–¥–µ–Ω–æ: 12 —á–∞—Ç–æ–≤

–í–∞—à –≤—ã–±–æ—Ä: all
‚úì –í—ã–±—Ä–∞–Ω–æ –≤—Å–µ—Ö: 12 —á–∞—Ç–æ–≤
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:

```yaml
download_settings:
  download_message_history: true
  history_format: json  # –∏–ª–∏ txt
  history_directory: history
```

–ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
- **JSON**: `chat_{chat_id}.jsonl` (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî JSON –æ–±—ä–µ–∫—Ç)
- **TXT**: `chat_{chat_id}.txt` (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è)

### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Ä—Ö–∏–≤–æ–º

#### –≠–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–∞ (`export_chat.py`)

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–¥–∏–Ω —á–∞—Ç –∏–∑ –∞—Ä—Ö–∏–≤–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É:

```bash
python export_chat.py \
  --base-directory /media/disk/Telegram \
  --chat-id -1001234567890 \
  --out /path/to/export \
  --link-mode hardlink  # –∏–ª–∏ copy
```

–°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```
export/
‚îî‚îÄ‚îÄ chat_-1001234567890/
    ‚îú‚îÄ‚îÄ chat_1001234567890.jsonl
    ‚îú‚îÄ‚îÄ chat_1001234567890.html
    ‚îú‚îÄ‚îÄ media/
    ‚îÇ   ‚îú‚îÄ‚îÄ 1__file1.jpg
    ‚îÇ   ‚îú‚îÄ‚îÄ 2__file2.mp4
    ‚îÇ   ‚îî‚îÄ‚îÄ ...
    ‚îî‚îÄ‚îÄ export_manifest.json
```

#### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ –∏—Å—Ç–æ—Ä–∏–∏ (`rebuild_history_index.py`)

–ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç `history/index.html` –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö JSONL –∞—Ä—Ö–∏–≤–æ–≤:

```bash
python rebuild_history_index.py \
  --base-directory /media/disk/Telegram \
  --history-directory history \
  --regenerate-html  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤—Å–µ chat_*.html
```

#### –û—á–∏—Å—Ç–∫–∞ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (`cleanup_orphaned_files.py`)

–£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–æ–∫ —Ç–∏–ø–æ–≤ –º–µ–¥–∏–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –Ω–∏ –≤ –æ–¥–Ω–æ–º –∞—Ä—Ö–∏–≤–µ —á–∞—Ç–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è (—Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python cleanup_orphaned_files.py \
  --base-directory /media/disk/Telegram \
  --history-directory history

# –†–µ–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
python cleanup_orphaned_files.py \
  --base-directory /media/disk/Telegram \
  --force

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python cleanup_orphaned_files.py \
  --base-directory /media/disk/Telegram \
  --verbose
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ JSONL –∞—Ä—Ö–∏–≤—ã –≤ `history/` –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∏–∑ –ø–æ–ª—è `downloaded_file`
- –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫–∏ `video/`, `photo/`, `document/`, `audio/`, `voice/`, `video_note/`
- –ù–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ –ø–∞–ø–∫–∞—Ö, –Ω–æ –Ω–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤–∞—Ö
- –£–¥–∞–ª—è–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Ç–æ–ª—å–∫–æ —Å —Ñ–ª–∞–≥–æ–º `--force`)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ `--dry-run` (—Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ)
- –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å `--force`
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫:

```yaml
download_settings:
  max_parallel_downloads: 5  # None = –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```

### –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é

–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –º–µ–¥–∏–∞ —Ç–æ–ª—å–∫–æ –æ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```yaml
sender_filter:
  enabled: true
  user_ids: [123456789, 987654321]
  usernames: ["@username1", "@username2"]
```

### –ü—Ä–æ–ø—É—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:

```yaml
download_settings:
  skip_duplicates: true
```

### –ö–∞—Å—Ç–æ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

–£–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∑–æ–∫:

```yaml
download_settings:
  base_directory: "/path/to/downloads"
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª

–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π:

```yaml
logging:
  file_logging:
    enabled: true
    file_path: downloads.log
    level: INFO
    max_bytes: 10485760  # 10 MB
    backup_count: 5
```

## –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞:

- `last_read_message_id` ‚Äî ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `ids_to_retry` ‚Äî —Å–ø–∏—Å–æ–∫ ID —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è —Å –º–µ—Å—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–∫–ª–∞–¥—É

–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–∫–ª–∞–¥—É](CONTRIBUTING.md) –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–¥–∞—á–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø—Ä–∞–≤–∏–ª –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–Ω–æ–≥–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ.

### –•–æ—Ç–∏—Ç–µ –ø–æ–º–æ—á—å?

–•–æ—Ç–∏—Ç–µ —Å–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ, –≤–Ω–µ—Å—Ç–∏ –∫–æ–¥ –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é? –û—Ç–ª–∏—á–Ω–æ! –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –Ω–∞—à–∏ [—Ä—É–∫–æ–≤–æ–¥—è—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã](CONTRIBUTING.md).

### –ö–æ–¥–µ–∫—Å –ø–æ–≤–µ–¥–µ–Ω–∏—è

–ü–æ–º–æ–≥–∏—Ç–µ –Ω–∞–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å Telegram Media Downloader –æ—Ç–∫—Ä—ã—Ç—ã–º –∏ –∏–Ω–∫–ª—é–∑–∏–≤–Ω—ã–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –∏ —Å–ª–µ–¥—É–π—Ç–µ –Ω–∞—à–µ–º—É [–ö–æ–¥–µ–∫—Å—É –ø–æ–≤–µ–¥–µ–Ω–∏—è](CODE_OF_CONDUCT.md).

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- [–û–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/Dineshkarthik/telegram_media_downloader/discussions)
- [–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ](https://github.com/Dineshkarthik/telegram_media_downloader/issues)
- [Telegram Community](https://t.me/tgmdnews)
