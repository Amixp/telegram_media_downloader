# План: TUI выбор чатов + превью

## Цель

Сделать клавиатурный TUI для выбора чатов при запуске, чтобы:

- выбирать/снимать выбор чатов клавишей **Space**
- перемещаться по списку клавишами (↑/↓/PgUp/PgDn/Home/End)
- фильтровать список (по типу чата) и быстро искать по названию
- видеть **превью** (последнее сообщение) для чата под курсором
- сохранять выбор в `config.yaml` и уметь **редактировать** его при следующем запуске

## Критерии готовности

- [x] TUI режим выбора работает без дополнительных зависимостей (через `curses`)
- [x] Если `curses` недоступен — падаем обратно на “classic” интерактивный режим
- [x] Превью обновляется при перемещении курсора (используется `dialog.message`, без сетевых запросов)
- [x] Есть поиск (`/`) и фильтр по типу (`f`) + очистка (`c`)
- [x] Выбор сохраняется в `config.yaml` в `chats[]` с `enabled=True/False`
- [x] Повторный запуск позволяет редактировать выбор и корректно обновляет `enabled`
- [x] Тесты проходят

## Изменяемые места в коде

- `utils/chat_selector.py`
  - новый режим `ui="tui"` и обработчик TUI
  - получение списка чатов с превью
- `media_downloader.py`
  - выбор UI через `chat_selection_ui`
  - режим “редактировать список” при наличии сохранённых чатов
- `utils/config.py`
  - метод для сохранения/обновления выбранных чатов (`enabled` + сохранение прогресса)
- `config.yaml.example`
  - документирование `chat_selection_ui`
